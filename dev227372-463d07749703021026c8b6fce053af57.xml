<?xml version="1.0" encoding="UTF-8"?><unload unload_date="2024-06-25 10:09:07"><sys_remote_update_set action="INSERT_OR_UPDATE"><application display_value="Global">global</application><application_name>Global</application_name><application_scope>global</application_scope><application_version/><collisions/><commit_date/><deleted/><description/><inserted/><name>GitHub ServiceNow Integration</name><origin_sys_id/><parent/><release_date/><remote_base_update_set/><remote_parent_id/><remote_sys_id>463d07749703021026c8b6fce053af57</remote_sys_id><state>loaded</state><summary/><sys_class_name>sys_remote_update_set</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>23cf3f709707021026c8b6fce053af85</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><update_set/><update_source/><updated/></sys_remote_update_set><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_category_m2m_e8e25ff89703021026c8b6fce053af7e</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="GitHub Integration Properties">c522573c9703021026c8b6fce053afac</category><order>100</order><property display_value="github.repo" name="github.repo">2f401bb49703021026c8b6fce053afbc</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:52:51</sys_created_on><sys_id>e8e25ff89703021026c8b6fce053af7e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>github.repo.GitHub Integration Properties</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_category_m2m_e8e25ff89703021026c8b6fce053af7e</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 06:52:51</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload><payload_hash>2003289382</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>23cf3f709707021026c8b6fce053afa0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e2b312c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.repo.GitHub Integration Properties</target_name><type>Category Property</type><update_domain>global</update_domain><update_guid>6ce25ff879030210c85767b881dfc580</update_guid><update_guid_history>6ce25ff879030210c85767b881dfc580:2003289382</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_5e3537f097c3021026c8b6fce053af81</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Please provide filter for customer_update_set table.&#13;
</description><ignore_cache>true</ignore_cache><is_private>false</is_private><name>github.upload.filter</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 09:23:32</sys_created_on><sys_id>5e3537f097c3021026c8b6fce053af81</sys_id><sys_mod_count>5</sys_mod_count><sys_name>github.upload.filter</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_5e3537f097c3021026c8b6fce053af81</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 09:28:36</sys_updated_on><type>string</type><value/><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=5e3537f097c3021026c8b6fce053af81"/></record_update>]]></payload><payload_hash>-1979663945</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>27cf3f709707021026c8b6fce053af9f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904eb9c9e40000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.upload.filter</target_name><type>System Property</type><update_domain>global</update_domain><update_guid>8e86377413c30210f566f8e482b4fe52</update_guid><update_guid_history>8e86377413c30210f566f8e482b4fe52:-1979663945,17567bf025c30210a5b9a1d599d6368f:798086429,73367734d6c30210db165007fd585d18:1751024800,5cf5373454c3021074e69d55aeba0a1a:-1979663945,d1e5f7f047c30210ed9170f5a310d2c6:798086429,0065fb30acc302108451638b997f937b:-1979663945</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_2f401bb49703021026c8b6fce053afbc</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Your Username/repository name</description><ignore_cache>true</ignore_cache><is_private>false</is_private><name>github.repo</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:42:31</sys_created_on><sys_id>2f401bb49703021026c8b6fce053afbc</sys_id><sys_mod_count>0</sys_mod_count><sys_name>github.repo</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_2f401bb49703021026c8b6fce053afbc</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 06:42:31</sys_updated_on><type>string</type><value>kaustubhk24/SNOW-integration</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=2f401bb49703021026c8b6fce053afbc"/></record_update>]]></payload><payload_hash>237498095</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>63cf3f709707021026c8b6fce053af9f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e21bc4f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.repo</target_name><type>System Property</type><update_domain>global</update_domain><update_guid>518013b82d03021070214096e0f57172</update_guid><update_guid_history>518013b82d03021070214096e0f57172:237498095</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_script_include_846d83f49703021026c8b6fce053af0f</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.GitHubUtils&lt;/api_name&gt;&lt;caller_access/&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;GitHubUtils&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var GitHubUtils = Class.create();
GitHubUtils.prototype = {
    initialize: function() {
        var GITHUB_TOKEN = '';
        var GITHUB_REPO = '';
    },

    copyUpdateSet: function(sysid) {
        // Get current update set
        var updateSet = new GlideRecord("sys_update_set");
        updateSet.get(sysid);

        // Copy the update set to the retrieved update set table
        var retrievedUpdateSet = new GlideRecord('sys_remote_update_set');
        retrievedUpdateSet.initialize();
        retrievedUpdateSet.description = updateSet.description;
        retrievedUpdateSet.name = updateSet.name;
        retrievedUpdateSet.release_date = updateSet.release_date;
        retrievedUpdateSet.remote_sys_id = updateSet.sys_id;
        retrievedUpdateSet.application = updateSet.application;
        // Add scope information if needed
        var scopeGr = new GlideRecord('sys_scope');
        scopeGr.get(updateSet.application);
        if (scopeGr.isValid()) {
            retrievedUpdateSet.application_name = scopeGr.name;
            retrievedUpdateSet.application_scope = scopeGr.scope;
            retrievedUpdateSet.application_version = scopeGr.version;
        }
        retrievedUpdateSet.state = "loaded";

        var returnid = retrievedUpdateSet.insert();

        // Now iterate through all the customer updates from the original update set and create copies assigned to the new update set
        var custUpdate = new GlideRecord('sys_update_xml');
        custUpdate.addQuery('update_set', updateSet.sys_id);
        custUpdate.query();
        while (custUpdate.next()) {
            custUpdate.remote_update_set = returnid;
            custUpdate.update_set = '';
            custUpdate.insert();
        }
        return returnid;
    },




    getUpdateSetPayload: function(sysid) {
        // Start building the XML output
        var outputStart = "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;";
        var unloadTag = "&lt;unload unload_date=\"" + GlideSysDateUtil.getUMTDateTimeString() + "\"&gt;";
        var unloadClose = "&lt;/unload&gt;";

        // Add a cleaned up payload of the update set record itself
        var updateSetGR = new GlideRecord("sys_remote_update_set");
        updateSetGR.get(sysid);
        var xml = new GlideRecordXMLSerializer();
        var updateSet = new String(xml.serialize(updateSetGR))
        updateSet = this.cleanXMLBlock(updateSet);

        var output = outputStart + unloadTag + updateSet;

        // Add cleaned up payloads of the all the customer updates
        var custUpdateGR = new GlideRecord("sys_update_xml");
        custUpdateGR.addQuery("remote_update_set", updateSetGR.sys_id);
        custUpdateGR.query();
        while (custUpdateGR.next()) {
            var xmlString = new GlideRecordXMLSerializer();
            var custUpdate = new String(xmlString.serialize(custUpdateGR));
            custUpdate = this.cleanXMLBlock(custUpdate);
            output += custUpdate;
        }
        output += unloadClose;
        return output;
    },


    cleanXMLBlock: function(xmlString) {
        try {
            xmlString = xmlString.replace(/&lt;\?.*\?&gt;&lt;sys_remote_update_set&gt;/g, "&lt;sys_remote_update_set action=\"INSERT_OR_UPDATE\"&gt;");
            xmlString = xmlString.replace(/&lt;\?.*\?&gt;&lt;sys_update_xml&gt;/g, "&lt;sys_update_xml action=\"INSERT_OR_UPDATE\"&gt;");
        } catch (e) {}
        return xmlString;
    },

    deleteUpdateSet: function(sysid) {
        var gr = new GlideRecord("sys_remote_update_set");
        if (gr.get(sysid)) {
            gr.deleteRecord();
        }
    },

    copyAndExtract: function(sysid) {
        var tempSysId = this.copyUpdateSet(sysid);
        var output = this.getUpdateSetPayload(tempSysId);
        this.deleteUpdateSet(tempSysId);
        return output;
    },

    backupUpdateSet: function(sysid, name) {
        var fileName = gs.getProperty("instance_name") + "-" + sysid + ".xml";
        var updateSetContents = this.copyAndExtract(sysid);
        this.uploadFile(fileName, updateSetContents, name);
    },

    loadProperties: function() {
        this.GITHUB_TOKEN = gs.getProperty('github.token');
        this.GITHUB_REPO = gs.getProperty('github.repo');
        if (this.GITHUB_TOKEN == '' || this.GITHUB_REPO == '') {
            gs.addErrorMessage("You need to set the values of system properties mentioned below.\ngithub.token\ngithub.repo");
        }

    },

    process: function(sys_id) {
        this.loadProperties();
        // Iterate through filtered list of update sets
        var updateSet = new GlideRecord("sys_update_set");
        updateSet.get('sys_id=' + sys_id);
        this.backupUpdateSet(updateSet.sys_id, updateSet.name);

    },

    uploadFile: function(fileName, fileContents, fileDescription) {
        var sha = this.getSHA(fileName);
        var restMessage = new sn_ws.RESTMessageV2();
        //restMessage.setBasicAuth(this.GHUSER, this.GHPWD);
        restMessage.setHttpMethod("put");
        restMessage.setRequestHeader('Authorization', 'Bearer ' + this.GITHUB_TOKEN);
        restMessage.setEndpoint("https://api.github.com/repos/" + this.GITHUB_REPO + "/contents/" + fileName);
        var util = new GlideStringUtil();
        var encodedContents = util.base64Encode(fileContents);
        // Note we are building the request body as a string, as setStringParameter seems to run into issues with the GitHub REST API
        var reqBody = "\"path\" : \"" + fileName + "\", \"message\" : \"" + fileDescription + "\", \"content\" : \"" + encodedContents + "\"";
        if (sha) reqBody += ", \"sha\" : \"" + sha + "\"";
        restMessage.setRequestBody("{" + reqBody + "}");
        var response = restMessage.execute();
        var body = response.getBody();
        var parser = new JSON();
        var bodyObj = parser.decode(body);
        if (JSUtil.nil(bodyObj.content.sha)) {
            return false;
        } else {
            return bodyObj.content.sha;
        }
    },


    getSHA: function(fileName) {
        var restMessage = new sn_ws.RESTMessageV2();
        restMessage.setRequestHeader('Authorization', 'Bearer ' + this.GITHUB_TOKEN);

        //restMessage.setBasicAuth(this.GHUSER, this.GHPWD);
        restMessage.setHttpMethod("get");
        restMessage.setEndpoint("https://api.github.com/repos/" + this.GITHUB_REPO + "/contents/" + fileName);
        var response = restMessage.execute();
        var body = response.getBody();
        var parser = new JSON();
        var bodyObj = parser.decode(body);
        if (JSUtil.nil(bodyObj.sha)) {
            return false;
        } else {
            return bodyObj.sha;
        }
    },

    type: 'GitHubUttils'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2024-06-25 06:33:39&lt;/sys_created_on&gt;&lt;sys_id&gt;846d83f49703021026c8b6fce053af0f&lt;/sys_id&gt;&lt;sys_mod_count&gt;9&lt;/sys_mod_count&gt;&lt;sys_name&gt;GitHubUtils&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_846d83f49703021026c8b6fce053af0f&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2024-06-25 09:53:13&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-556741111</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>6bcf3f709707021026c8b6fce053afa0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904ed052580000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>GitHubUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>e62cbf384cc302108efcc9166848e18e</update_guid><update_guid_history>e62cbf384cc302108efcc9166848e18e:-556741111,9fbc9ff42d430210a993843026335fb7:1548491304,bc0c5f301a430210a979154d76f9b04a:-1545638190,fadb9b347a43021030b5cd60aa412d33:1823680738,93ab17b07b43021030a882f8d8b24673:1394071192,c3c9dbf0c44302102f59fa8d95ab64c8:1086927601,bbd753fc23030210faa71ccee0056fe2:1235005798,49f19ff8de0302106bb0ac6260927231:-1841290935,e2a193f4a60302102d79c7cca266cce1:-1146514828,5f7e83f4940302107e4ea137ff169255:1267722488</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_18cfcb789703021026c8b6fce053af91</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Enter your Fine Grained token from GitHub, make sure you have Given read and write access for the required repositoy</description><ignore_cache>true</ignore_cache><is_private>false</is_private><name>github.token</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:40:24</sys_created_on><sys_id>18cfcb789703021026c8b6fce053af91</sys_id><sys_mod_count>2</sys_mod_count><sys_name>github.token</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_18cfcb789703021026c8b6fce053af91</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 06:56:12</sys_updated_on><type>password</type><value>{{gpaes}}lSAuOYho40W5ReFF5UC6VqYoB/TeP5aY1kMETNCQtsevth6vMFkyi37s2Y39fnJLhnNpbQmG7mf+&#13;
DivTioZa5jgEG678NG3HtJKESPoygGkELDJss5Z9/F4qUcqg5MvW</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=18cfcb789703021026c8b6fce053af91"/></record_update>]]></payload><payload_hash>-511211203</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>6fcf3f709707021026c8b6fce053af85</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e2e43f90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.token</target_name><type>System Property</type><update_domain>global</update_domain><update_guid>b1a353bc0903021059aa78b78d30ffeb</update_guid><update_guid_history>b1a353bc0903021059aa78b78d30ffeb:-511211203,df73177cd903021086b2c8523107e0d1:-1824594409,9a0013b8cc03021026ede8c5cefb8f6c:-2079485610</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_category_m2m_6c857bf097c3021026c8b6fce053af6b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="GitHub Integration Properties">c522573c9703021026c8b6fce053afac</category><order>400</order><property display_value="github.upload.filter" name="github.upload.filter">5e3537f097c3021026c8b6fce053af81</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 09:24:08</sys_created_on><sys_id>6c857bf097c3021026c8b6fce053af6b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>github.upload.filter.GitHub Integration Properties</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_category_m2m_6c857bf097c3021026c8b6fce053af6b</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 09:24:08</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload><payload_hash>-1836942364</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>6fcf3f709707021026c8b6fce053af9f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904eb5b10c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.upload.filter.GitHub Integration Properties</target_name><type>Category Property</type><update_domain>global</update_domain><update_guid>2c857bf014c302104cb063b4ead6396d</update_guid><update_guid_history>2c857bf014c302104cb063b4ead6396d:-1836942364</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_script_79549fbc9703021026c8b6fce053af99</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;false&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;true&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;sys_update_set&lt;/collection&gt;&lt;condition&gt;gs.getProperty('github.br.update');&lt;/condition&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="sys_update_set"&gt;stateCHANGESTOcomplete^EQ&lt;item display_value="Complete" endquery="false" field="state" goto="false" newquery="false" operator="CHANGESTO" or="false" value="complete"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;Run GitHub Integration&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

	var git = new GitHubUtils();
	git.process(current.sys_id);

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2024-06-25 06:59:57&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;79549fbc9703021026c8b6fce053af99&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;Run GitHub Integration&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_79549fbc9703021026c8b6fce053af99&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2024-06-25 08:55:46&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;async_always&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=79549fbc9703021026c8b6fce053af99"/&gt;&lt;/record_update&gt;</payload><payload_hash>719432479</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>a7cf3f709707021026c8b6fce053afa0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e9bbb2c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table>sys_update_set</table><target_name>Run GitHub Integration</target_name><type>Business Rule</type><update_domain>global</update_domain><update_guid>9d0f2b784b43021025f0e99845c873c3</update_guid><update_guid_history>9d0f2b784b43021025f0e99845c873c3:719432479,ecce6b787843021081abbc72c7f75f38:-1309492184,b32553fca30302100338c1b9bf4b1fa5:719432479,e48453fc7a0302100b5905ffcaa9709c:-832769766</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_app_module_03f2973c9703021026c8b6fce053af25</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="GitHub Integration">f313d77c9703021026c8b6fce053af7b</application><assessment/><device_type/><filter/><hint/><homepage/><image/><link_type>DIRECT</link_type><map_page/><mobile_title>GitHub Integration Properties</mobile_title><mobile_view_name>Mobile</mobile_view_name><name/><order/><override_menu_roles>false</override_menu_roles><query>/system_properties_ui.do?sysparm_title=Properties&amp;sysparm_category=GitHub%20Integration%20Properties&amp;sysparm_domain_restore=false&amp;sysparm_stack=no</query><report/><roles/><sys_class_name>sys_app_module</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:54:08</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>03f2973c9703021026c8b6fce053af25</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GitHub Integration Properties</sys_name><sys_overrides/><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_app_module_03f2973c9703021026c8b6fce053af25</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 06:54:08</sys_updated_on><timeline_page/><title>GitHub Integration Properties</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload><payload_hash>-71333387</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>abcf3f709707021026c8b6fce053af85</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e2c5e2c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>GitHub Integration Properties</target_name><type>Module</type><update_domain>global</update_domain><update_guid>5b23177c6b030210393aea0330e09588</update_guid><update_guid_history>5b23177c6b030210393aea0330e09588:-71333387</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_category_m2m_5c14d7bc9703021026c8b6fce053aff7</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="GitHub Integration Properties">c522573c9703021026c8b6fce053afac</category><order>300</order><property display_value="github.br.update" name="github.br.update">27a3df3c9703021026c8b6fce053af25</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:58:02</sys_created_on><sys_id>5c14d7bc9703021026c8b6fce053aff7</sys_id><sys_mod_count>0</sys_mod_count><sys_name>github.br.update.GitHub Integration Properties</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_category_m2m_5c14d7bc9703021026c8b6fce053aff7</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 06:58:02</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload><payload_hash>-504914373</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>abcf3f709707021026c8b6fce053af9f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e2fee630000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.br.update.GitHub Integration Properties</target_name><type>Category Property</type><update_domain>global</update_domain><update_guid>5414d7bcf703021098a07e55c142eef9</update_guid><update_guid_history>5414d7bcf703021098a07e55c142eef9:-504914373</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_27a3df3c9703021026c8b6fce053af25</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Do you want to update your code when you mark update set as Complete?</description><ignore_cache>true</ignore_cache><is_private>false</is_private><name>github.br.update</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:57:28</sys_created_on><sys_id>27a3df3c9703021026c8b6fce053af25</sys_id><sys_mod_count>3</sys_mod_count><sys_name>github.br.update</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_27a3df3c9703021026c8b6fce053af25</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 07:03:10</sys_updated_on><type>boolean</type><value>true</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=27a3df3c9703021026c8b6fce053af25"/></record_update>]]></payload><payload_hash>730384105</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>afcf3f709707021026c8b6fce053af9e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e34a47a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.br.update</target_name><type>System Property</type><update_domain>global</update_domain><update_guid>3b355fbc3a03021066261a2ea1ff1e6b</update_guid><update_guid_history>3b355fbc3a03021066261a2ea1ff1e6b:730384105,27845bbcdd030210fbd554c68ba02d55:-1317841572,a534dbbca0030210712fdfd521a491d7:-1224137948,48f3d7bcb00302106fa8c0ff7a230411:-972406567</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_category_m2m_ece25ff89703021026c8b6fce053af81</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="GitHub Integration Properties">c522573c9703021026c8b6fce053afac</category><order>200</order><property display_value="github.token" name="github.token">18cfcb789703021026c8b6fce053af91</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:52:51</sys_created_on><sys_id>ece25ff89703021026c8b6fce053af81</sys_id><sys_mod_count>0</sys_mod_count><sys_name>github.token.GitHub Integration Properties</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_category_m2m_ece25ff89703021026c8b6fce053af81</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 06:52:51</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload><payload_hash>211684690</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>e3cf3f709707021026c8b6fce053afa0</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e2b31520000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>github.token.GitHub Integration Properties</target_name><type>Category Property</type><update_domain>global</update_domain><update_guid>e0e25ff81403021019dc17157f4b7b83</update_guid><update_guid_history>e0e25ff81403021019dc17157f4b7b83:211684690</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_app_application_f313d77c9703021026c8b6fce053af7b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_application"><sys_app_application action="INSERT_OR_UPDATE"><active>true</active><category display_value="Custom Applications">e0355b31ef303000a61d5a3615c0fb78</category><description/><device_type>browser</device_type><hint/><name/><order>100</order><roles/><sys_class_name>sys_app_application</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 06:54:03</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>f313d77c9703021026c8b6fce053af7b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GitHub Integration</sys_name><sys_overrides/><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_app_application_f313d77c9703021026c8b6fce053af7b</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 06:54:03</sys_updated_on><title>GitHub Integration</title><view_name/></sys_app_application></record_update>]]></payload><payload_hash>-663917535</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>e7cf3f709707021026c8b6fce053af85</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e2c49a50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>GitHub Integration</target_name><type>Application Menu</type><update_domain>global</update_domain><update_guid>4623df3c9b030210bb0ba8ce4fc234c4</update_guid><update_guid_history>4623df3c9b030210bb0ba8ce4fc234c4:-663917535</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_category_c522573c9703021026c8b6fce053afac</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_properties_category"&gt;&lt;sys_properties_category action="INSERT_OR_UPDATE"&gt;&lt;name&gt;GitHub Integration Properties&lt;/name&gt;&lt;sys_class_name&gt;sys_properties_category&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2024-06-25 06:51:44&lt;/sys_created_on&gt;&lt;sys_id&gt;c522573c9703021026c8b6fce053afac&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;GitHub Integration Properties&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_properties_category_c522573c9703021026c8b6fce053afac&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2024-06-25 06:51:44&lt;/sys_updated_on&gt;&lt;title&gt;&lt;![CDATA[&lt;p&gt;Please update these properties before you start GitHub Sync, till then it will not work.&lt;/p&gt;]]&gt;&lt;/title&gt;&lt;/sys_properties_category&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=c522573c9703021026c8b6fce053afac"/&gt;&lt;/record_update&gt;</payload><payload_hash>-828121022</payload_hash><remote_update_set display_value="GitHub ServiceNow Integration">23cf3f709707021026c8b6fce053af85</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2024-06-25 10:09:07</sys_created_on><sys_id>e7cf3f709707021026c8b6fce053af9f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>1904e2a2a0a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2024-06-25 10:09:07</sys_updated_on><table/><target_name>GitHub Integration Properties</target_name><type>System Property Category</type><update_domain>global</update_domain><update_guid>c4a2db78e9030210fcfb5a99c3ae9a9b</update_guid><update_guid_history>c4a2db78e9030210fcfb5a99c3ae9a9b:-828121022</update_guid_history><update_set/><view/></sys_update_xml></unload>